# Last modified on 18 January 2020.

CREATE TABLE IF NOT EXISTS phq8_data (
    participant_name VARCHAR(36) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    file_size INT NOT NULL,
    file_modified_on INT NOT NULL,

    project_id VARCHAR(255) NOT NULL,
    user_id VARCHAR(36) NOT NULL,
    source_id VARCHAR(36) NOT NULL,
    time INT NOT NULL,
    time_completed_utc INT NOT NULL,
    time_completed_local DATETIME NOT NULL,
    time_interval INT NOT NULL,
    time_notification INT DEFAULT NULL,
    name VARCHAR(10) NOT NULL,
    version VARCHAR(10) NOT NULL,
    question_id0 VARCHAR(10) NOT NULL,
    value0 TINYINT NOT NULL,
    start_time0 INT NOT NULL,
    end_time0 INT NOT NULL,
    question_id1 VARCHAR(10) NOT NULL,
    value1 TINYINT NOT NULL,
    start_time1 INT NOT NULL,
    end_time1 INT NOT NULL,
    question_id2 VARCHAR(10) NOT NULL,
    value2 TINYINT NOT NULL,
    start_time2 INT NOT NULL,
    end_time2 INT NOT NULL,
    question_id3 VARCHAR(10) NOT NULL,
    value3 TINYINT NOT NULL,
    start_time3 INT NOT NULL,
    end_time3 INT NOT NULL,
    question_id4 VARCHAR(10) NOT NULL,
    value4 TINYINT NOT NULL,
    start_time4 INT NOT NULL,
    end_time4 INT NOT NULL,
    question_id5 VARCHAR(10) NOT NULL,
    value5 TINYINT NOT NULL,
    start_time5 INT NOT NULL,
    end_time5 INT NOT NULL,
    question_id6 VARCHAR(10) NOT NULL,
    value6 TINYINT NOT NULL,
    start_time6 INT NOT NULL,
    end_time6 INT NOT NULL,
    question_id7 VARCHAR(10) NOT NULL,
    value7 TINYINT NOT NULL,
    start_time7 INT NOT NULL,
    end_time7 INT NOT NULL,   
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    UNIQUE KEY record_id (project_id, user_id, source_id, time, time_completed_utc, name, version),
    FOREIGN KEY (participant_name) REFERENCES participants(participant_name),
    FOREIGN KEY (time_interval) REFERENCES timeIntervals(timeInterval_ID)
);